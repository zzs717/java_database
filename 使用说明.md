# java_database

欢迎阅读，此项目为使用java搭建的数据库服务器，通过IO实现数据的永久存储和读取，实现了sql语句中的如下基本命令

    USE: 更改当前使用的数据库
    CREATE: 构建新的数据库或表（取决于提供的参数）
    INSERT: 在现有表中添加新数据
    SELECT: 搜索与给定条件匹配的数据
    UPDATE: 更改表中包含的数据
    ALTER: 更改现有表的结构（行）
    DELETE: 从现有表中删除与给定条件匹配的数据
    DROP: 从数据库中删除指定的表，或删除整个数据库
    AND / OR: 允许条件组合 （利用括号来定义筛选条件）
    LIKE: 用于比较条件下的部分子弦
    JOIN: 在两张表上执行内部连接

使用方法：在src文件夹中进入cmd命令窗口并通过javac完成DBSever以及DBClient的编译之后，先运行java DBSever.java将服务器运行起来，然后java DBClient.java以运行客户端即可开始输入sql指令。

使用示例：
// Create and use a test database

CREATE DATABASE markbook;

[OK]

USE markbook;

[OK]

// Create a table to store some data

CREATE TABLE marks (name, mark, pass);

[OK]

// Populate the table with a few entries

INSERT INTO marks VALUES ('Steve', 65, true);

[OK]

INSERT INTO marks VALUES ('Dave', 55, true);

[OK]

INSERT INTO marks VALUES ('Bob', 35, false);

[OK]

INSERT INTO marks VALUES ('Clive', 20, false);

[OK]

// Perform various test queries on the table…

SELECT * FROM marks;

[OK]

id	name	mark	pass
1	Steve	65	true
2	Dave	55	true
3	Bob	35	false
4	Clive	20	false

SELECT * FROM marks WHERE name != 'Dave';

[OK]

id	name	mark	pass
1	Steve	65	true
3	Bob	35	false
4	Clive	20	false

SELECT * FROM marks WHERE pass == true;

[OK]

Id	name	mark	pass
1	Steve	65	true
2	Dave	55	true

UPDATE marks SET mark = 38 WHERE name == 'Clive';

[OK]

SELECT * FROM marks WHERE name == 'Clive';
[OK]

id	name	mark	pass

4	Clive	38	false

DELETE FROM marks WHERE name == 'Dave';

[OK]



SELECT * FROM marks;

[OK]

id	name	mark	pass

1	Steve	65	true

3	Bob	35	false

4	Clive	38	false


DELETE FROM marks WHERE mark < 40;

[OK]

SELECT * FROM marks;

[OK]

id	name	mark	pass

1	Steve	65	true



CREATE TABLE actors (name, nationality, awards);

INSERT INTO actors VALUES ('Hugh Grant', 'British', 3);

INSERT INTO actors VALUES ('Toni Collette', 'Australian', 12);

INSERT INTO actors VALUES ('James Caan', 'American', 8);

INSERT INTO actors VALUES ('Emma Thompson', 'British', 10);

CREATE TABLE movies (name, genre);

INSERT INTO movies VALUES ('Mickey Blue Eyes', 'Comedy');

INSERT INTO movies VALUES ('About a Boy', 'Comedy');

INSERT INTO movies VALUES ('Sense and Sensibility', 'Period Drama');



CREATE TABLE roles (name, movieID, actorID);

INSERT INTO roles VALUES ('Edward', 3, 1);

INSERT INTO roles VALUES ('Frank', 1, 3);

INSERT INTO roles VALUES ('Fiona', 2, 2);

INSERT INTO roles VALUES ('Elinor', 3, 4);



SELECT * FROM actors WHERE awards < 5;

[OK]

id	name		nationality	awards	

1	Hugh Grant	British		3



ALTER TABLE actors ADD age;

[OK]



SELECT * FROM actors;

[OK]

id	name			nationality	awards		age	

1	Hugh Grant		British		3		

2	Toni Collette		Australian	12		

3	James Caan		American	8		

4	Emma Thompson	British		10



UPDATE actors SET age = 45 WHERE name == 'Hugh Grant';

[OK]



SELECT * FROM actors WHERE name == 'Hugh Grant';

[OK]

id	name		nationality	awards		age	

1	Hugh Grant	British		3		45



SELECT nationality FROM actors WHERE name == 'Hugh Grant';

[OK]

nationality	

British



ALTER TABLE actors DROP age;

[OK]



SELECT * FROM actors WHERE name == 'Hugh Grant';

[OK]

id	name		nationality	awards	

1	Hugh Grant	British		3


SELECT * FROM actors WHERE (awards > 5) AND (nationality == 'British');

[OK]

id	name			nationality	awards

4	Emma Thompson	British		10


// Use of brackets ensures desired execution ordering is achieved

SELECT * FROM actors WHERE (awards > 5) AND ((nationality == 'British') OR (nationality == 'Australian'));

[OK]

id	name			nationality	awards

2	Toni Collette		Australian	12

4	Emma Thompson	British		10




// The LIKE operation only works with substrings (when used, attempt to interpret data as textual)

SELECT * FROM actors WHERE name LIKE 'an';

[OK]

id	name		nationality	awards	

1	Hugh Grant	British		3	

3	James Caan	American	8



SELECT * FROM actors WHERE awards >= 10;

[OK]

id	name			nationality	awards	

2	Toni Collette		Australian	12	

4	Emma Thompson	British		10



// Remove some data entries ready to test a JOIN query

DELETE FROM actors WHERE name == 'Hugh Grant';

[OK]

DELETE FROM actors WHERE name == 'James Caan';

[OK]

DELETE FROM actors WHERE name == 'Emma Thompson';

[OK]




// The JOIN query should perform an inner join on the two specified tables

// You need not store the combined table on the filesystem, but just return the complete table to the user

// This is equivalent to performing SELECT * on the combined table

// The entry IDs should be generated for this table (they are NOT the IDs from the original two tables)

// Note: generated attribute names are just examples, but you might like to use those suggested


JOIN actors AND roles ON id AND actorID;

[OK]

id	actors.name	actors.nationality	actors.awards	roles.name	roles.movieID	roles.actorID	

1	Toni Collette	Australian		12		Fiona		2		2



// Another JOIN with multiple matches in the 2nd table

JOIN movies AND roles ON id AND movieID;

[OK]

id	movies.name		movies.genre	roles.name	roles.movieID	roles.actorID	

1	Mickey Blue Eyes	Comedy	Frank		1		3	

2	About a Boy		Comedy	Fiona		2		2	

3	Sense and Sensibility	Period Drama	Edward		3		1	

4	Sense and Sensibility	Period Drama	Elinor		3		4




DROP TABLE actors;

[OK]



SELECT * FROM actors;

[ERROR]: Table does not exist



DROP DATABASE imdb;

[OK]


USE imdb;

[ERROR]: Unknown database

